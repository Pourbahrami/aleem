var model={answer:"",answerToggle:!1,needsReset:!1,petitionText:"اللهم صلی علی محمد و آل محمد و عجل فرجهم شریف"},controller={init:()=>{view.init()},keyDown:e=>{let t=view.getPetitionLength();return"."===e.key?(model.answerToggle=!model.answerToggle,document.getElementById("petition").value+=model.petitionText[t],!1):1===e.key.length&&model.answerToggle?(model.answer+=e.key,document.getElementById("petition").value+=model.petitionText[t],console.log(model.answer),!1):void("Backspace"===e.key&&model.answerToggle&&(model.answer=model.answer.slice(0,-1)))},getResetStatus:()=>model.needsReset,getPetitionChar:()=>model.petitionText[view.getPetitionLength()-1],getAnswer:()=>{const e=["در حال حاضر سامانه قادر به پاسخگویی نمی‌باشد. لطفا بعدا مراجعه نمایید."];if(model.needsReset=!0,view.getQuestion()){if(model.answer)return'<div class="alert alert-success"><strong>نتیجه استعلام:</strong><p><span class="glyphicon glyphicon-ok"></span>'+model.answer+"</p></div>";return'<div class="alert alert-danger"><p><span class="glyphicon glyphicon-alert"></span>'+e[Math.floor(Math.random()*e.length)]+"</p></div>"}return"لطفا سوال خود را با دقت وارد کنید."},reset:()=>{model.answer="",model.answerToggle=!1,model.needsReset=!1,view.resetUi()}},view={init:()=>{document.getElementById("answerButton").addEventListener("click",()=>{view.renderAnswer()}),document.getElementById("resetButton").addEventListener("click",controller.reset),document.getElementById("petition").onkeydown=(e=>(""==document.getElementById("petition").value&&controller.reset(),controller.keyDown(e))),document.getElementById("question").onkeydown=(e=>{switch(e.key){case"?":view.renderAnswer();break;case"Enter":document.getElementById("question").value.includes("؟")||(document.getElementById("question").value+="؟"),view.renderAnswer()}}),document.getElementById("petition").onfocus=(()=>{controller.getResetStatus()&&controller.reset()})},getInputText:()=>document.getElementById("petition").value,getPetitionLength:()=>document.getElementById("petition").value.length,getQuestion:()=>document.getElementById("question").value,renderAnswer:()=>{document.getElementById("answer").innerHTML=controller.getAnswer(),view.loadingBar(),view.disableQuestion(),view.clearPetition()},showAnswer:()=>{document.getElementById("answer").style.display="block"},hideAnswer:()=>{document.getElementById("answer").style.display="none"},resetUi:()=>{view.clearPetition(),view.clearQuestion(),view.clearAnswer(),view.enableQuestion(),view.hideAnswer()},clearPetition:()=>{document.getElementById("petition").value=""},clearQuestion:()=>{document.getElementById("question").value=""},clearAnswer:()=>{document.getElementById("answer").innerHTML=""},disableQuestion:()=>{document.getElementById("question").disabled=!0},enableQuestion:()=>{document.getElementById("question").disabled=!1},loadingBar:()=>{var e=document.getElementById("loading"),t=document.getElementById("loading-inside"),n=0,o=setInterval(function(){console.log("test"),n>=100?(e.style.display="none",view.showAnswer(),clearInterval(o)):(n+=1,t.style.width=n+"%")},10);console.log("button  clicked"),e.style.display="block"}};controller.init();